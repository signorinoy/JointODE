% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{.get_spline_config}
\alias{.get_spline_config}
\title{Configure B-Spline Parameters}
\usage{
.get_spline_config(
  x,
  degree = 3,
  n_knots = 5,
  knot_placement = "quantile",
  boundary_knots = NULL
)
}
\arguments{
\item{x}{Numeric vector of data points for determining knot positions.
Used to calculate quantiles when \code{knot_placement = "quantile"}.}

\item{degree}{Integer specifying polynomial degree of the B-spline basis.
Common choices: 1 (linear), 2 (quadratic), 3 (cubic). Default is 3.}

\item{n_knots}{Integer specifying number of internal knots. More knots
allow greater flexibility but may cause overfitting. Default is 5.}

\item{knot_placement}{Character string specifying knot placement strategy:
\itemize{
\item \code{"quantile"}: Places knots at data quantiles (default)
\item \code{"equal"}: Places knots at equal intervals
}}

\item{boundary_knots}{Numeric vector of length 2 specifying the boundary
knots \code{[min, max]}, or NULL to use \code{range(x)}. Default is NULL.}
}
\value{
A list of class \code{"spline_config"} with components:
\describe{
\item{\code{degree}}{Polynomial degree for the B-spline basis}
\item{\code{knots}}{Numeric vector of internal knot positions}
\item{\code{boundary_knots}}{Numeric vector of length 2}
\item{\code{df}}{Degrees of freedom (number of basis functions)}
}
}
\description{
Creates B-spline configuration with optimal knot placement for flexible
modeling of baseline hazards and nonlinear trajectories in joint models.
}
\details{
The function calculates B-spline basis parameters following the conventions
of \code{splines::bs()}. The degrees of freedom equals
\code{length(knots) + degree + 1}, which determines the number of basis
functions in the resulting B-spline representation.
}
\note{
Quantile-based knot placement is generally preferred as it adapts to the
data distribution, placing more knots where data is dense. Equal spacing
is useful when uniform coverage across the range is desired.
}
\examples{
\dontrun{
# Example 1: Configure splines for event times
event_times <- rexp(100, rate = 0.1)
config_baseline <- .get_spline_config(
  x = event_times,
  degree = 3,
  n_knots = 5,
  knot_placement = "quantile"
)

# Example 2: Configure splines for index values
index_values <- rnorm(100)
config_index <- .get_spline_config(
  x = index_values,
  degree = 2,
  n_knots = 4,
  knot_placement = "equal",
  boundary_knots = c(-3, 3)
)
}

}
\seealso{
\code{\link[splines]{bs}} for B-spline basis generation
}
\concept{utilities}
